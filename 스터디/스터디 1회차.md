
### **1회차 진행 정리 - 유사 부품 검색 (이미지 기반)**

#### 🎯 주요 목표
- **입력 이미지와 유사한 부품 이미지 검색** 기능 구현
- 부품 이미지 임베딩 생성 → 유사도 계산 → 유사 이미지 반환
- 빠른 프로토타이핑을 위해 **CLI 또는 노트북 기반** 로컬 테스트

#### 🔧 사용 기술
- **이미지 [[임베딩#📌 임베딩(Embedding)이란?|임베딩]] 추출**
    - 모델: `ResNet50` 또는 `CLIP` 사용
    - 목적: 이미지 -> 벡터로 변환
    - 임베딩을 한다고 함 -> 이미지를 수치 벡터화 하는 것
- **유사도 검색**
    - 방법: `FAISS` 또는 `numpy` 기반 cosine similarity
    - DB: **자체 이미지 폴더**에서 검색 (로컬 DB)
- **유사 이미지 반환**
    - top-k 유사도 이미지 선택 후 시각화/출력
#### 🧪 주요 테스트 항목
- 서로 다른 이미지끼리 유사도 비교 정확도 확인
- 다양한 부품 이미지에 대해 **탐색 속도 및 정확도** 테스트
- 이미지 해상도, 배경, 각도 변화 등에 따른 임베딩 변화 확인


## ✅ 1회차 전체 진행 순서 (세부 설명)

---

### 🔹 **Step 1. 이미지 데이터셋 준비**

- **목적**: 유사도를 비교할 기준이 될 부품 이미지 모음이 필요
- **예시**: `images/` 폴더 안에 부품 이미지들 (예: `bolt_01.jpg`, `bearing_02.jpg`) 저장
- **전제**: 이미지들은 사전에 정제된 상태 (크기, 배경 등은 신경 안 써도 됨)
---
### 🔹 **Step 2. 이미지 임베딩 추출**
- **목적**: 이미지 하나를 수치 벡터로 변환 (ex. 512차원 벡터)
- **사용 도구**:
    - `ResNet50` (pretrained on ImageNet)
    - 또는 `CLIP`의 이미지 인코더
- **동작 원리**:
    - 각 이미지를 모델에 넣으면 `벡터(숫자 배열)`이 나옴
    - 이 벡터가 이미지의 특징을 요약한 표현 (임베딩)
- **결과**:
    - 예: `bolt_01.jpg → [0.12, -0.83, ..., 0.04]`
---
### 🔹 **Step 3. 모든 이미지 임베딩 저장**

- **목적**: 검색 대상이 되는 모든 이미지의 임베딩을 미리 구해두고 저장
- **방법**:
    - 한 번 모델로 돌려서 벡터 추출 → numpy `.npy` 파일 또는 메모리에 저장
- **이유**: 나중에 검색할 때 속도 빠르게 하기 위함 (매번 추출하지 않음)
---
### 🔹 **Step 4. 검색 요청 이미지 임베딩 추출**

- **예시 상황**: 사용자가 `test_bolt.jpg`를 검색하고 싶을 때
- **과정**:
    - 해당 이미지를 모델에 넣고 벡터로 변환
    - (위의 Step 2와 같은 방식)
---
### 🔹 **Step 5. 유사도 계산 (Cosine Similarity)**

- **목적**: 검색 이미지와 데이터셋 이미지들 간의 **유사 정도** 측정
- **수학적 정의**:
    - cosine similarity = 두 벡터의 방향이 얼마나 비슷한가?
    - 값 범위: `-1 ~ 1` (1에 가까울수록 유사)
- **실행 방식**:
    - numpy를 사용하거나 FAISS 같은 라이브러리로 속도 개선
    - `top-k` 방식으로 유사한 이미지 상위 N개 선택
---
### 🔹 **Step 6. 유사 이미지 결과 반환 및 시각화**

- **목적**: 사용자가 입력한 이미지와 가장 유사한 이미지들을 보여줌
- **방법**:
    - 상위 k개 이미지 파일 이름 출력
    - matplotlib 등으로 시각화 가능 (예: 왼쪽은 입력 이미지, 오른쪽은 유사도 순 결과 3장)
---
### 🔹 **(옵션) Step 7. 간단한 CLI 또는 노트북 테스트**

- **CLI 방식** :
```bash
python search.py --query test_bolt.jpg --topk 3
```

- **Jupyter Notebook 방식** :
    - 셀 하나에서 이미지 업로드하고 시각화 테스트

---

## 요약된 흐름
```css
[이미지 폴더]
↓ 
[이미지 임베딩 추출]
↓ 
[모든 이미지 벡터 저장]  ←→  [입력 이미지 임베딩]
↓ 
[cosine similarity 계산]
↓ 
[top-k 유사 이미지 결과 시각화]
```

